## 一、缓存雪崩：

redis 中大量缓存 key 在同一时间失效，造成大量请求落在数据库上导致数据库宕机。必须是大量请求同时进行访问，这时 redis 中大量缓存 key 过期失效。

解决方法：

1、缓存 key 过期时间时，添加随机时间，防止缓存 key 在同一时间失效。

2、设置缓存 key 永不过期

3、如果是 redis 集群部署，将缓存 key 分散到不同的 redis 库中

4、设置定时任务，在缓存 key 失效前重新刷进缓存

## 二、缓存穿透：

在高并发中，大量请求访问同一个不存在的缓存 key 时，导致请求落在数据库中，导致数据库查询压力过大而宕机。大量请求访问的是同一个缓冲 key，而这个缓存 key 并不存在。

解决方式：

1、将不存在的请求数据缓存到 redis 中，并设置稍短的过期时间。

2、对参数进行校验，过滤非法参数

3、使用布隆过滤器进行过滤。

## 三、缓存击穿

在高并发中，某个热点缓存 key 在某个时刻突然失效，导致大量请求直接访问数据库致使数据库宕机。

解决方法：

1、设置热点永不过期

2、设置互斥锁，当大量请求访问时，将第一个请求加上互斥锁，其他请求拿不到锁就进行等待，当第一个请求拿到数据后就进行缓存数据，后面的请求就可以直接访问缓存了。
